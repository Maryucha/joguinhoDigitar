/* ---------- Paleta suave e variáveis ---------- */
:root{
  --bg:#f7f7fb;
  --card:#fff;
  --border:#e5e7eb;
  --text:#111827;
  --muted:#6b7280;
  --accent1:#a7f3d0;   /* verde menta */
  --accent2:#c7d2fe;   /* lilás */
  --good:#86efac;
  --bad:#fecaca;
  --focus:#2563eb;
}

/* reduz animações se o usuário preferir */
@media (prefers-reduced-motion: reduce){
  *{animation:none !important; transition:none !important;}
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
  color:var(--text);
  background:
    radial-gradient(1200px 600px at 20% -10%, #eef2ff 0%, transparent 60%),
    radial-gradient(900px 600px at 120% 10%, #dcfce7 0%, transparent 60%),
    var(--bg);
  min-height:100dvh;
  display:flex; align-items:center; justify-content:center;
  padding:clamp(8px,2vw,16px);
}

/* ---------- Card principal ---------- */
.card{
  width:min(980px, 100%);
  background:var(--card);
  border:1px solid var(--border);
  border-radius:24px;
  box-shadow:0 10px 28px rgba(31,41,55,.08);
  display:flex; flex-direction:column;
  overflow:visible;          /* evita “corte” em telas estreitas */
}

/* ---------- Cabeçalho ---------- */
.header{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; flex-wrap:wrap;
  padding:clamp(10px,2vw,16px) clamp(12px,2.5vw,20px);
  background:linear-gradient(90deg, rgba(167,243,208,.45), rgba(199,210,254,.45));
  border-bottom:1px solid var(--border);
}
.title{
  display:flex; align-items:center; gap:10px;
  font-weight:800; letter-spacing:.2px;
  font-size:clamp(16px,2.4vw,18px);
}
.chip{
  padding:4px 10px; border-radius:999px; font-weight:800; font-size:12px;
  color:#065f46; background:#d1fae5; border:1px solid #bfe6d4;
}

/* ---------- Controles (responsivo em grid) ---------- */
.controls{ display:grid; gap:10px; grid-auto-flow:column; grid-auto-columns:max-content; }
@media (max-width: 900px){
  .controls{ grid-auto-flow:row; grid-template-columns:repeat(3, minmax(0,1fr)); }
  .name-field{ grid-column:1 / -1; }
}
@media (max-width: 560px){
  .controls{ grid-template-columns:repeat(2, minmax(0,1fr)); }
}

select, button, input[type="number"], .name-field input, label.switch{
  background:#f9fafb; color:var(--text);
  border:2px solid var(--border);
  border-radius:14px;
  padding:12px 14px;
  font:700 clamp(14px,2.2vw,16px)/1.1 ui-sans-serif,system-ui;
  min-height:48px; min-width:80px;
  max-width:100%;
}
button{ cursor:pointer }
button.primary{
  background:linear-gradient(90deg, var(--accent1), var(--accent2));
  border:none;
  box-shadow:0 2px 0 rgba(0,0,0,.05);
}
button.secondary{ background:#f3f4f6; }
button:active{ transform:translateY(1px) scale(.99) }

/* foco visível */
button:focus, select:focus, input:focus{
  outline:3px solid var(--focus); outline-offset:2px;
  box-shadow:0 0 0 4px rgba(37,99,235,.2);
}

/* ---------- Conteúdo ---------- */
.content{ padding:clamp(14px,2.4vw,22px); display:grid; gap:clamp(12px,2vw,18px); }

/* Stats em grid responsivo */
.stats{
  display:grid; gap:clamp(8px,2vw,12px);
  grid-template-columns:repeat(4, minmax(0,1fr));
}
@media (max-width:900px){ .stats{ grid-template-columns:repeat(2, minmax(0,1fr)); } }
.stat{
  background:#f9fafb; border:1px solid var(--border);
  border-radius:16px; padding:12px 14px;
}
.stat .label{ color:var(--muted); font-size:clamp(12px,2.2vw,13px) }
.stat .value{ font-weight:800; font-size:clamp(18px,3vw,22px) }

/* ---------- Arena ---------- */
.arena{
  position:relative; overflow:hidden;
  background:#fff; border:1px solid var(--border);
  border-radius:20px; padding:clamp(14px,2.6vw,20px);
  display:grid; gap:clamp(10px,2vw,14px);
}
.prompt{
  min-height:clamp(72px,12vh,120px);
  display:flex; align-items:center; justify-content:center;
  font-weight:900; letter-spacing:.6px; text-align:center;
  padding:8px;
}
.prompt.letter{ font-size:clamp(48px,12vw,80px) }
.prompt.word{   font-size:clamp(36px,10vw,64px) }

.chars{ display:flex; flex-wrap:wrap; justify-content:center; gap:clamp(6px,1.6vw,8px) }
.c{
  min-width:clamp(34px,8vw,40px);
  padding:clamp(8px,1.8vw,10px) clamp(10px,2vw,12px);
  font-weight:900; font-size:clamp(22px,6vw,26px);
  text-align:center;
  border-radius:12px; border:2px dashed var(--border);
  transition:background .12s, border-color .12s, color .12s, transform .12s;
}
.c.done{ background:#ecfdf5; color:#065f46; border-color:#86efac }
.c.bad{  background:#fff1f2; color:#9f1239; border-color:#fecaca }

/* input e botões de ação */
.input-row{ display:flex; flex-wrap:wrap; justify-content:center; gap:clamp(8px,2vw,12px) }
.typebox{
  width:min(100%, 560px);
  background:#fff; border:3px solid var(--border); border-radius:16px;
  padding:clamp(14px,2.6vw,16px) clamp(16px,3vw,18px);
  font-size:clamp(18px,4.2vw,22px); color:#111827;
}

/* progresso */
.progress{ height:clamp(10px,1.8vw,12px); background:#f1f5f9; border:1px solid var(--border); border-radius:999px; overflow:hidden }
.bar{ height:100%; background:linear-gradient(90deg, var(--accent1), var(--accent2)); transform-origin:left center; width:100% }

/* feedback */
.status-bubble{
  text-align:center; border:1px solid var(--border); border-radius:14px;
  background:#f3f4f6; color:#374151;
  font-weight:800; font-size:clamp(16px,3.8vw,18px);
  padding:clamp(8px,2.2vw,10px) clamp(10px,2.6vw,12px);
}
.status-bubble.good{ background:#ecfdf5; color:#065f46; border-color:#bbf7d0 }
.status-bubble.bad{  background:#fff1f2; color:#9f1239; border-color:#fecaca }

/* confete e tremidinha (mesmo comportamento de antes) */
.shake{ animation:shake .25s linear }
@keyframes shake{ 0%{transform:translateX(0)}25%{transform:translateX(-3px)}50%{transform:translateX(3px)}75%{transform:translateX(-2px)}100%{transform:translateX(0)} }
.confetti{ position:absolute; inset:0; pointer-events:none; overflow:hidden }
.dot{ position:absolute; width:10px; height:10px; border-radius:50%; opacity:.9; animation:pop 800ms ease-out forwards }
@keyframes pop{ 0%{transform:translate(var(--x), var(--y)) scale(.6); opacity:1} 100%{transform:translate(var(--x-end), calc(var(--y) - 120px)) scale(1); opacity:0} }

/* ---------- Leaderboard ---------- */
.leaderboard{
  background:#fff; border:1px solid var(--border);
  border-radius:16px; padding:clamp(10px,2vw,12px) clamp(12px,2.4vw,14px);
  display:grid; gap:clamp(8px,2vw,10px);
}
.lb-header{ display:flex; align-items:center; justify-content:space-between; gap:10px }
.badge{ background:#eef2ff; border:1px solid #e5e7eb; color:#111827; padding:4px 10px; border-radius:999px; font-weight:800; font-size:12px }
.rank-list{ list-style:decimal; margin:0; padding-left:22px; display:grid; gap:6px }
.rank-item{ display:flex; justify-content:space-between; gap:12px; padding:6px 10px; background:#f9fafb; border:1px solid var(--border); border-radius:10px }
.rank-item .who{ font-weight:800; font-size:clamp(14px,3.4vw,16px) }
.rank-item .pts{ font-weight:700; color:#374151; font-size:clamp(14px,3.4vw,16px) }
.lb-hint{ margin:0; color:var(--muted); font-size:clamp(12px,3.2vw,13px) }

/* ---------- Footer ---------- */
.footer{
  display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between;
  padding:clamp(12px,2vw,14px) clamp(14px,2.5vw,20px);
  border-top:1px solid var(--border); color:#6b7280;
  font-size:clamp(12px,2.4vw,14px);
}

/* acessibilidade: screen-reader only */
.sr-only{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}


/* --- evitar corte no topo em iOS/iPadOS e navegadores mobile --- */

/* use a altura "segura" e não force centralização quando a tela é baixa */
body{
  min-height: 100svh;                 /* em vez de 100dvh/100vh */
  align-items: flex-start;             /* não centraliza vertical fixo */
  overflow: auto;                      /* permite rolar se precisar */
}

/* centraliza o card com margem, respeitando áreas seguras (notch/barras) */
.card{
  margin: clamp(8px, 2vh, 24px) auto;  /* espaço no topo/rodapé adaptativo */
  overflow: visible;                   /* já tínhamos: garante sem corte */
}

/* aplica padding com safe-area se disponível */
@supports (padding: max(0px)) {
  body{
    padding-top: max(env(safe-area-inset-top), clamp(8px, 2vh, 20px));
    padding-bottom: max(env(safe-area-inset-bottom), clamp(8px, 2vh, 20px));
  }
}

/* se a tela for baixa, sempre “desgruda” do topo e permite scroll */
@media (max-height: 720px){
  body{ align-items: flex-start; }
}

/* em telas muito estreitas, garante que o header não estoure e possa rolar na horizontal se necessário */
.header, .controls{ min-width: 0; }
@media (max-width: 420px){
  .controls{
    overflow: auto hidden;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 4px;
  }
}
